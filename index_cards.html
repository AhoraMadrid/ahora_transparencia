<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="favicon.ico">

    <title>Test Cards</title>

    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/font-awesome.min.css" rel="stylesheet">
    <!-- Google Font -->
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700,800' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Ubuntu:700' rel='stylesheet' type='text/css'>
    

    <!-- Table Sorter -->
    <link rel="stylesheet" href="js/themes/blue/style.css" type="text/css" id="" media="print, projection, screen" />
<link href="css/tablas.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>

    <div class="container">
    
    <div class="row">
    <div class="col-md-12">
    select
    </div>
    </div>
    
    
    <div class="row">
    <div class="col-md-12">graph / slider</div>
    </div>
    
    
    <div class="row" id="sort_and_filters">
    
     <div class="col-md-4">
      <p>filter by:</p>
      
     <table width="100%">
     
     <tr>
     <td><label><input type="radio" name="tipo_ui" value=".c1"  class="filter_ui"> clase 1</label></td>
     <td align="right"><span class="totC" id="tot_c1">123456</span></td>
     </tr>
     
     <tr>
     <td><label>
       <input type="radio" name="tipo_ui" value=".c2" class="filter_ui"> clase 2
      </label>
     </td>
     <td align="right"><span class="totC" id="tot_c2">123456</span></td>
     </tr>
     
     <tr>
     <td><label>
     <input type="radio" name="tipo_ui" value=".c3" class="filter_ui"> clase 3
     </label>
     </td>
     <td align="right"><span class="totC" id="tot_c3">123456</span></td>
     </tr>
     
     <tr>
     <td><label>
     <input type="radio" name="tipo_ui" value="*" checked class="filter_ui"> total
     </label>
     </td>
     <td align="right"><span class="totC" id="tot_cTot">123456</span></td>
     </tr>
     
     </table>
     
     </div>
    
    <div class="col-md-4">
   
   
     
    <br>
   
       </div>
    
    <div class="col-md-4">
    <p>sort by:</p>
   <label>
   <input type="radio" name="sort_ui" value="money"  class="sort_ui" id="f_money"> valor
   </label><br/>
   <label>
   <input type="radio" name="sort_ui" value="money" checked class="sort_ui" id="f_fecha"> fecha
   </label>
    </div>
        
    </div>
    
    
    <div class="row">
    <div class="col-md-12 noPadding" id="facturas">
    
    <div class="card c1" data-money="1345.50" data-class="c1">
    <p class="fecha">06/05/2015</p>
    <p class="concepto">2T-057-Nuevo Hotel Paseo del Arte, S.L fra 1399078</p>
    <p class="benefit grigio">Alfredo Calosci</p>
    <p class="dni grigio">X1527622p</p>
    <p class="importe">1345</p>
    </div>
    
    <div class="card c2" data-money="191.18" data-class="c2">
    <p class="fecha">19/05/2015</p>
    <p class="concepto">2T-108-Welab fra 0014001347</p>
    <p class="benefit grigio">WeLab Professional Equipment S.L.</p>
    <p class="dni grigio">B84621309</p>
    <p class="importe">191.18</p>
    </div>
    
    <div class="card c2" data-money="363" data-class="c2">
    <p class="fecha">1/06/2015</p>
    <p class="concepto">22T-124-Sala Boite sl fra 13-15</p>
    <p class="benefit grigio">Boite Madrid sl</p>
    <p class="dni grigio">B84596709</p>
    <p class="importe">363</p>
    </div>
    
    <div class="card c3" data-money="2900.20" data-class="c3">
    <p class="fecha">29/05/2015</p>
    <p class="concepto">2T-057-Nuevo Hotel Paseo del Arte, S.L fra 1399078</p>
    <p class="benefit grigio">Alfredo Calosci</p>
    <p class="dni grigio">X1527622p</p>
    <p class="importe">2900</p>
   </div>
   
    <div class="card c2" data-money="390" data-class="c2">
    <p class="fecha">29/05/2015</p>
    <p class="concepto">22T-124-Sala Boite sl fra 13-15</p>
    <p class="benefit grigio">Boite Madrid sl</p>
    <p class="dni grigio">B84596709</p>
    <p class="importe">390</p>
    </div>
    
    <div class="card c3"  data-money="1352" data-class="c3">
    <p class="fecha">30/05/2015</p>
    <p class="concepto">2T-057-Nuevo Hotel Paseo del Arte, S.L fra 1399078</p>
    <p class="benefit grigio">Alfredo Calosci</p>
    <p class="dni grigio">X1527622p</p>
    <p class="importe">1352</p>
    </div>
    
    
    <div class="card c1" data-money="1847.30" data-class="c1">
    <p class="fecha">05/06/2015</p>
    <p class="concepto">2T-057-Nuevo Hotel Paseo del Arte, S.L fra 1399078</p>
    <p class="benefit grigio">Alfredo Calosci</p>
    <p class="dni grigio">X1527622p</p>
    <p class="importe">1345</p>
    </div>
    
    </div>
    </div>
    
    <div class="row" id="texto_intro">
    <div class="col-md-12">
    <p class="bigger">En nuestra voluntad de trasparencia os mostramos el Presupuesto de Ahora 
    Madrid y los ingresos que llevamos hasta el momento.
    </p>
    
    <p>Nuestra intención es publicar al detalle de cada gasto pasada la campaña y una vez contrastadas las facturas que estamos recibiendo. Igual con los 
    ingresos, ya que debemos verificar los datos de las donaciones y 
    micro-créditos.</p>
    
    <hr/>
    
    <p><em>última actualización: 20 de mayo, 2015</em></p>
    </div>
    </div>
    
    
   
    </div> <!-- /container -->



<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
 <script src="js/jquery.min.js"></script>
 <!-- Include all compiled plugins (below), or include individual files as needed -->
 <script src="js/bootstrap.min.js"></script>
 <script type="text/javascript" src="js/jquery.tablesorter.min.js"></script> 
 <script src="js/jquery.csvToTable.js"></script>
 
  <script src="js/jquery.formatCurrency-1.4.0.pack.js"></script>
 
 <script src="http://code.highcharts.com/highcharts.js"></script>
 <script type="text/javascript" src="http://code.highcharts.com/modules/data.js"></script>
 
 <!-- isotope -->
 <script src="js/isotope.pkgd.js"></script>
  <script src="js/packery-mode.pkgd.min.js"></script>
 
 
 <script>
 
 // totales
 var totByCat = [];
 var totCat = {c1:0.0, c2:0.0,c3:0.0, cTot: 0.0}; 
 //console.log(totByCat);
 //console.log(totCat.c3);
 
 $("div.card").each(function() {
 	var this_div   = $(this);
 	var myMoney = $(this).data("money");
 	var myMoneyF = parseFloat(myMoney);
 	var myClass = $(this).data("class");
 	//var addTo = totCat[myClass];
 	totCat[myClass] += myMoneyF;
 	totCat.cTot += myMoneyF;
 	
 	$(this).find("p.importe").text(myMoney);
 	$(this).find("p.importe").formatCurrency({
 	 	decimalSymbol: ',',
 		digitGroupSymbol: '.',
 		symbol: '€',
 		positiveFormat: '%n <span class="euro">%s</span>',
 	});
 	
 	//console.log(totCat[myClass]);
 });
 
 // write totals
 $('#tot_c1').text(totCat.c1);
 $('#tot_c2').text(totCat.c2);
 $('#tot_c3').text(totCat.c3);
 $('#tot_cTot').text(totCat.cTot);
 
 
 $('.totC').formatCurrency({
  	decimalSymbol: ',',
 	digitGroupSymbol: '.',
 	symbol: '€',
 	positiveFormat: '%n <span class="euro">%s</span>',
 });
 
 var $grid = $('#facturas').isotope({
   // options
   itemSelector: '.card',
   // layoutMode: 'fitRows'
   layoutMode: 'packery',
   packery: {
     gutter: 8
   },
   
   getSortData: {
      // name: '.name', // text from querySelector
     money: function( itemElem ) { // function
          var weight = $( itemElem ).find('.importe').text();
          return parseFloat( weight.replace( /[\(\)]/g, '') );
        },
        
     date: function ( itemElem ) {
             var dateStr = $( itemElem ).find('.fecha').text(),
                 dateArray = dateStr.split('/'),
                 year = dateArray[2],
                 month = dateArray[1],
                 day = dateArray[0];
             return new Date(year, month, day);
         }
   },
   
   sortBy: [ 'date', 'money' ]
     
 });
 
// $grid.isotope({ sortBy : 'money' });
// $grid.isotope({ sortBy : 'original-order' });
 
 $("input[name='tipo_ui']").change(function(){
     // Do something interesting here
     var YO = $(this).val();
     //alert(YO);
     $grid.isotope({ filter: YO });
 });
 
 $("input[id='f_money']").change(function(){
   $grid.isotope({ sortBy : 'money' });
 });
 
 $("input[id='f_fecha']").change(function(){
  //$grid.isotope({ sortBy : 'original-order' });
   $grid.isotope({ sortBy : 'date' });
 });
 
 /*
 $('p.importe').formatCurrency({
  	decimalSymbol: ',',
 	digitGroupSymbol: '.',
 	symbol: '€',
 	positiveFormat: '%n <span class="euro">%s</span>',
 });
 
 */

/* chart 
$.get('datos/gastos_graph.csv', function(csv) {

    $('#container_gastos').highcharts({
        chart: {
            type: 'pie',
            style: {
                        fontFamily: 'Open Sans'
                    }
            
        },
        
        colors: ['#18a68d', '#0FA68D', '#55C4B2', '#2FB19B', '#008972', 
           '#006B59', '#1E55AD', '#6189C9', '#3D6CB7', '#0D3F8F',  '#083170',  '#FFAB17',  '#FFCA6E' ],
           
        data: {
            csv: csv
        },
        title: {
            text: ''
        },
        plotOptions: {
                    pie: {
                    
                        dataLabels: {
                            enabled: true,
                            distance: 10,
                            style: {
                                fontWeight: 'bold',
                                color: 'gray',
                                //textShadow: '0px 1px 2px black'
                            }
                        },
                        startAngle: -90,
                        endAngle: 90,
                        center: ['50%', '75%'],
                        innerSize: '20%'
                    }
                }
              
    });
});

     
    
$.get('datos/ingresos_graph.csv', function(csv) {
    $('#container_ingresos').highcharts({
        chart: {
            type: 'pie',
            style: {
                        fontFamily: 'Open Sans'
                    }
            
        },
        
        colors: ['#0FA68D', '#55C4B2', '#2FB19B', '#008972', 
           '#006B59', '#1E55AD', '#6189C9', '#3D6CB7', '#0D3F8F',  '#083170',  '#FFAB17','#FFCA6E'  ],
           
        data: {
            csv: csv
        },
        title: {
            text: ''
        },
        plotOptions: {
                    pie: {
                        dataLabels: {
                            enabled: true,
                            distance: 10,
                            style: {
                                fontWeight: 'bold',
                                color: 'gray',
                                //textShadow: '0px 1px 2px black'
                            }
                        },
                        startAngle: 90,
                        endAngle: 270,
                        center: ['50%', '1%'],
                        innerSize: '20%'
                    }
                }
              
    });
});

 */
  
 
 </script>
 
  </body>
</html>

