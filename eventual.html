<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="favicon.ico">

    <title>salarios</title>

    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/font-awesome.min.css" rel="stylesheet">
    <!-- Google Font -->
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700,800' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Ubuntu:700' rel='stylesheet' type='text/css'>
    

    <!-- Table Sorter -->
    <link rel="stylesheet" href="js/themes/blue/style.css" type="text/css" id="" media="print, projection, screen" />
<link href="css/tablas.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script src="js/iframeResizer.contentWindow.min.js"></script>
  </head>


<body>

    <div class="container">
    
    <div class="row" id="intro">
      
      <div class="col-md-12 noPadding">
    
    <ol class="breadcrumb">
      <li><a href="http://ahoramadrid.org/">ahora madrid</a></li>
      <li><a href="index.html">transparencia</a></li>
      
      <li class="active">Salarios Personal Eventual</li>
    </ol>
     <hr style="margin-bottom: 0;"/>
      </div>
      
     </div>
     
    
    <!-- cabecera -->
     <div class="row" id="cabecera">
     
     <div class="col-md-7 nopaddingL">
     <h2>Salarios Personal Eventual</h2>
     </div>
     
     <div class="col-md-5 text-right noPadding">
      <select id="jump_menu"></select>
    </div>
     </div>
     
    
    <div class="row">
        
        <div class="col-md-7 nopaddingL">
        
         <hr/>
    
        <p >Concejales y personal eventual tienen un salario bruto oficial, estipulado por el pleno del ayuntamiento.</p>
        <p class="bigger">El Reglamento económico de Ahora Madrid establece que el salario que efectivamente se cobre sea de <strong>cuatro salarios mínimos brutos</strong>.</p>
        <p>Esta cantidad se incrementará en un tercio del salario mínimo por cada descendiente a cargo y también se han establecido excepciones por situaciones especiales, debidamente justificadas.
            <br/>  
        </p>
        
         
        </div>
        
        <div class="col-md-5 text-right nopaddingR">
            <hr/>
         <p><small>Esta información se renueva trimestralmente.</small></p>
       <p><em>última actualización: 10 de marzo 2016</em></p>
       
       <hr/>
       
       <p><a href="pdf/Reglamento_economico_cargos_electos_AM.pdf"><i class="fa fa-download" style="padding-right: 1em;"></i> <small>Reglamento económico cargos electos</small></a></p>
        
        </div>
        </div>
    
    
      <div class="row">
     <div class="col-md-12 noPadding">
      <hr/>
     
      <h4 class="verde">Eventuales</h4>
      <p>Las personas que están contratadas como personal eventual (también conocidas como "asesoras") son parte del equipo de trabajo político que colabora con concejales y concejalas en llevar a cabo el proyecto con el que Ahora Madrid fue elegido para gobernar el Ayuntamiento.</p>

      <p>Las personas que aparecen a continuación han decidido libremente firmar el Reglamento Económico de Ahora Madrid. En virtud de este Reglamento, donan una parte de su sueldo a proyectos políticos y sociales, bien con aportaciones directas a entidades sin ánimo de lucro, bien a proyectos concretos a través de la Plataforma Goteo.</p>

      <p>Las cantidades varían de unos a otros debido a múltiples causas. Por un lado, no todo el equipo se ha incorporado en la misma fecha (hay incorporaciones recientes, que por lo tanto donan menos). Por otro lado, el Reglamento Económico establece diferencias  en las  donaciónes en relación  a las distintas situaciones y cargas  familiares  de cada persona, con los mismos criterios que atañen a los cargos electos.</p>

     <br/>

      
      <ul class="nav nav-tabs">
          <li role="presentation" class="active">
            <a href="#periodo-0"> 1 Jul 2015 - 31 Dic 2015</a>
          </li>          
        </ul>
        <div id="my-tab-content" class="tab-content">
            <div class="tab-pane active" id="periodo-0">
              <table id="salarios_eventuales" class="table tablesorter"> 
                  <thead> 
                  <tr> 
                      <th>Nombre</th> 
                      <th>Apellidos</th>
                      <th>Categoría</th>
                      <th>Organismo</th>
                      <th>Sueldo oficial<br/>bruto anual</th> 
                      <th>Salario neto mensual<br/>según reglamento AM</th> 
                      <th>Goteo</th>
                      <th>Donaciones</th>
                   </tr> 
                   
                  </thead> 
                  <tbody></tbody> 
                  </table>
            </div>
        </div>
</div>
</div>
     
    </div>
    
    
    
    
    </div> <!-- end container -->
    
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
     <script src="js/jquery.min.js"></script>
     <!-- Include all compiled plugins (below), or include individual files as needed -->
     <script src="js/bootstrap.min.js"></script>
     
     <!-- CSV parse -->
     <script src="js/papaparse.min.js"></script>
     <!-- formatCurrency -->
     <script src="js/jquery.formatCurrency-1.4.0.pack.js"></script>
      <!-- formatDate -->
      <script src="js/moment-with-locales.js"></script>
     
     <!-- tablesorter -->
     <script type="text/javascript" src="js/jquery.tablesorter.min.js"></script> 
     
     <!-- highcharts.js -->
     <script src="https://code.highcharts.com/highcharts.js"></script>
     <script type="text/javascript" src="https://code.highcharts.com/modules/data.js"></script>
     
     <!-- isotope -->
     <script src="js/isotope.pkgd.js"></script>
     <script src="js/packery-mode.pkgd.min.js"></script>
     
      <!-- cookies -->
     <script src="js/js.cookie.js"></script>
     
      <script src="js/jump_menu_transparencia.js"></script>
     <script>
     
     // jump menu
     $(document).ready(function() { 
     	var myPage = "eventual.html";
     	$("#jump_menu").find("option[value='" + myPage +"']").attr('selected', true);
      }); 
     
      
     var totC = {nominal:0.0, percibido:0.0, goteo:0.0, donacion:0.0, c:0.0, e:0.0};
     moment.locale('es');  // translate dates to es format
     
    
    var meses = []; // todos MM_AAAA
    var mesesR = []; // rótulos MM, AAAA
    var mesesL = []; // labels
    
    var peopleID = []; // just ID // once
    var peopleIDRow = []; // just ID
    var peopleData = []; // data Objects // once
    var peopleDataRow = {}; // data Objects

     
     $(document).ready(function() { 
        Papa.parse("datos_03/eventuales.tsv", {
        download: true,
        header: true,
        delimiter: "\t",    
        complete: function(results) {
             //console.log(results.data);         
            
            resultados=results
            $.each( results.data, function( index, value ) {

                 var obj = value;

                 if(  ("Apellidos" in obj) == false  || ("Nombre" in obj)== false) return true;
                //console.log(obj)
                 var miMes = moment(obj.fecha, "DD/MM/YYYY").format("MMMM");
                 var miAnno = moment(obj.fecha, "DD/MM/YYYY").format("YYYY");
                 var mes_anno = miMes +"_" + miAnno;
                 var mesYanno = miMes +", " + miAnno;
                 meses.push(mes_anno);
                 mesesR.push(mesYanno);
                 //console.log(miFecha);
                 peopleIDRow.push(obj.id); 
                 // people data
                 // create new object > add to array
                 peopleDataRow[obj.id] = {
                  nombre: obj.Nombre, 
                  apellidos: obj.Apellidos, 
                  categoria: obj.Categoria,
                  organismo : obj.Organismo,
                  status: 'e', nominal: 0.0, percibido: 0.0, goteo: 0.0, donaciones: 0.0};
            }); 
            
            //console.log(peopleID);
            // unique ID
            
            // var uniqueNames = [];
            $.each(peopleIDRow, function(i, el){
                if($.inArray(el, peopleID) === -1){
                 peopleID.push(el);
                }
            });
            
            for (i = 0; i < peopleID.length; i++) { 
                //console.log(peopleID[i]);
                var ID = peopleID[i];
                var P = peopleDataRow[ID];
                peopleData[ID] = P;
                //console.log(peopleData[ID])
            }
            
            //console.log(peopleData);
                        
            //peopleIDRow = []; // clean up
            //peopleDataRow = [];
                    
            // unique month
            var thisM = meses[0];
            mesesL.push(thisM);
            
            var mesesTot = {};
            //mesesTot[thisM] = 0.0;
            
            mesesTot[thisM] = {nominal: 0.0, percibido: 0.0, goteo: 0.0, donaciones: 0.0};
    
            var mesesRot = []; 
            mesesRot.push(mesesR[0]);
            
            for (i = 0; i < meses.length -1; i++) { 
                var nextM = meses[i+1];
                
                if(thisM == nextM){
                // nothing
                } else {
                    thisM = nextM;
                    mesesL.push(thisM);
                    mesesTot[thisM] = {nominal: 0.0, percibido: 0.0, goteo: 0.0, donaciones: 0.0};
                    mesesRot.push(mesesR[i+1]);
                }
            }
            
            
        $.each( results.data, function( index, value ) {
             var obj = value;
             if(  ("Apellidos" in obj) == false  || ("Nombre" in obj)== false) return true;
             // tot by month
             var miMMMM = moment(obj.fecha, "DD/MM/YYYY").format("MMMM");
             var miAAAA = moment(obj.fecha, "DD/MM/YYYY").format("YYYY");
             var miMM_AAAA = miMMMM + "_" + miAAAA;
             
             // tot by people
             //console.log('suela', obj);

             peopleData[obj.id].nominal += Number(obj.s_nominal);
             peopleData[obj.id].percibido += Number(obj.s_percibido);
             peopleData[obj.id].goteo += Number(obj.goteo);
             peopleData[obj.id].donaciones += Number(obj.donacion_1);
             peopleData[obj.id].donaciones += Number(obj.donacion_2);
             peopleData[obj.id].donaciones += Number(obj.donacion_3);
             peopleData[obj.id].donaciones += Number(obj.donacion_4);
             peopleData[obj.id].donaciones += Number(obj.donacion_5);
             peopleData[obj.id].donaciones += Number(obj.donacion_6);
             peopleData[obj.id].donacionesLista=[]
             //genero la estructura de donaciones
             for (var j=0 ; j<10; j++){
                if(obj["donacion_"+j] === undefined  || obj["favor_"+j]=== undefined) continue;
                else {                  
                  if( parseFloat(obj["donacion_"+j]) > 0){                    
                    peopleData[obj.id].donacionesLista.push( 
                        { donacion: Math.floor(obj["donacion_"+j]), 
                          favor:obj["favor_"+j] } 
                      ) 
                  }
                }
              }
              
             mesesTot[miMM_AAAA].nominal    += Number(obj.s_nominal);
             mesesTot[miMM_AAAA].percibido  += Number(obj.s_percibido);
             mesesTot[miMM_AAAA].goteo      += Number(obj.goteo);
             mesesTot[miMM_AAAA].donaciones += Number(obj.donacion_1);
             mesesTot[miMM_AAAA].donaciones += Number(obj.donacion_2);
             mesesTot[miMM_AAAA].donaciones += Number(obj.donacion_3);
             mesesTot[miMM_AAAA].donaciones += Number(obj.donacion_4);
             mesesTot[miMM_AAAA].donaciones += Number(obj.donacion_5);
             mesesTot[miMM_AAAA].donaciones += Number(obj.donacion_6);
              
             // totals
            // console.log(obj)
             totC['nominal'] += parseFloat(obj.s_nominal);
             totC['percibido'] += parseFloat(obj.s_percibido);
             totC['goteo'] += parseFloat(obj.goteo);
             totC['donacion'] += parseFloat(obj.donacion_1);
             totC['donacion'] += parseFloat(obj.donacion_2);
              
             totC[obj.status] += parseFloat(obj.s_percibido);
                
        }); 
        
        // table > monts
        /*var myTable =  $("#salarios_meses > tbody");
        for (i = 0; i < mesesL.length; i++) { 
            var thisM = mesesL[i];            
            var myRow = "<tr>";
            myRow += "<td>" + mesesRot[i] + "</td>" ; // mes, año
            myRow += "<td class='money'>" + mesesTot[thisM].nominal + "</td>" ;
            myRow += "<td class='money'>" + mesesTot[thisM].percibido + "</td>" ;
            myRow += "<td class='money'>" + mesesTot[thisM].goteo + "</td>" ;
            myRow += "<td class='money'>" + mesesTot[thisM].donaciones + "</td>" ;                        
            $(myTable).append( myRow);
        }       */ 
        
        // 
        var myTable =  $("#salarios_eventuales > tbody");             
        for (i = 0; i < peopleID.length; i++) {         
            var miID = peopleID[i];
            obj = peopleData[miID];
             console.log(obj);
            
            if(obj.status === "c"){                
              continue;
              } 
            else {
              // eventual 
              //info de los tipos de donantes
                  var donacioneshtml=""
                  for (var j=0 ; j<obj.donacionesLista.length; j++){ 
                        var parDonacion=obj.donacionesLista[j];                   
                        donacioneshtml +='<div><i class="fa fa-caret-right"></i> <span> '+ parDonacion.favor + ": </span>" ; 
                        donacioneshtml += "<span class='money'>" + parDonacion.donacion + "</span> </div>" ;  
                  }
                 
                  var myRow = '<tr >';
                  myRow += "<td>" +    obj.nombre + "</td>" ; 
                  myRow += "<td>" + obj.apellidos + "</td>" ; 
                  myRow += "<td>" + obj.categoria + "</td>" ; 
                  myRow += "<td>" + obj.organismo + "</td>" ;
                  myRow += "<td class='money'>" + obj.nominal + "</td>" ;
                  myRow += "<td class='money'>" + obj.percibido + "</td>" ;
                  myRow += "<td class='money'>" + obj.goteo + "</td>" ;
                  myRow += "<td > <span class='money'>" + obj.donaciones + '</span>' +
                  '<button style="float:right" type="button" class="popovertable-'+i+' btn btn-default btn-xs" data-container="body" data-toggle="popover" data-placement="bottom" > + </button>'  +
                  "</td> </tr>" ;   
                  myRow+= ' <tr> <td colspan="8" class="hiddenRow"> <div class="accordian-body collapse" id="infoextra'+i+ '">'; 
                  
                 myRow+="</div> </td> </tr>"
                  $(myTable).append( myRow);
                 $('.popovertable-'+i).popover({content:donacioneshtml, html:true})
                //  console.log("append eventual");                        
              }        
        }//end for
         
        window.setTimeout(initC, 200); //ñaaaapa. Si no hay un poco de retraso a veces no ejecuta la funcion de cards
        } // end complete loading json
        
     }); // end pepa parse
console.log("fin document ready");
    }); //end document ready 
     
     
     
    var initC=function() {
     console.log("init");
    
    $('.money').formatCurrency({
            decimalSymbol: ',',
            digitGroupSymbol: '.',
            symbol: '€',
            positiveFormat: '%n <span class="euro">%s</span>',
            roundToDecimalPlace:-2,
    });
         
    $("#salarios_meses").tablesorter({ 
             // sort on the first column and third column, order asc 
              sortList: [[0,0]] 
         }); 
     
     $("#salarios_eventuales").tablesorter({ 
             // sort on the first column and third column, order asc 
              // sortList: [[0,0]] 
        });     
      
      // isotope
      console.log($(''))
      var $grid = $('#concejales').isotope({
        // options
        itemSelector: '.card',
        // layoutMode: 'fitRows',
        layoutMode: 'packery',
        packery: {
          gutter: 8
        }         
      });
      
      $( ".card" ).click(function() {
        var c = $(this ).data( "id" ); // 52
        Cookies.set('concejal', c, { expires: 7, path: '' });
        window.location.href = "concejal.html";
        // alert( "Handler for " + c);
      }); 
      
      
           
    }     
     
     
               
    </script>
</body>

</html>
